!function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};this.BlurrySearch=function(){function c(c){if(this.text=c,this.tag=b(this.tag,this),this.search=b(this.search,this),!a.isString(this.text))throw new Error("Must specify text to search through")}return c.prototype.search=function(b){var c,d,e,f,g,h,i,j,k;if(!a.isString(b))throw new Error("Must specify search string");if(j=new String(this.text).toLocaleLowerCase(),b=b.toLocaleLowerCase(),k=a.removeNonWordCharacters(j),i=a.removeNonWordCharacters(b),g=k.str.indexOf(i.str),-1===g)return null;for(c=g+i.str.length-1,h=null,d=null,e=0;k.removed.length>0;){if(f=k.removed.shift(),f.index>g+e&&null==h&&(h=g+e),f.index>c+e){null==d&&(d=c+e);break}e+=1}return{startIndex:h,endIndex:d,similarity:a.similarity(j,b)}},c.prototype.tag=function(a,b,c){var d,e,f,g,h,i;null==c&&(c={}),b=b.replace(/[<>]/g,""),f=this.search(a),h=new String(this.text),g="<"+b;for(e in c)i=c[e],g+=" "+e+"='"+i+"'";return g+=">",d="</"+b+">",null!=f?h.substring(0,f.startIndex)+g+h.substring(f.startIndex,f.endIndex+1)+d+h.substring(f.endIndex+1):h},c}(),a=function(){function a(){}return a.isString=function(a){return null==a?!1:"string"==typeof a||"object"==typeof a&&a.constructor===String},a.characterDifferences=function(a,b){var c,d,e,f,g;for(f=[],d=a.split(""),e=b.split("");d.length>0;)c=d.pop(),g=e.indexOf(c),-1===g?f.push(c):e.splice(g,1);return f.concat(e)},a.similarity=function(a,b){return 1-this.characterDifferences(a,b).length/(a+b).length},a.percentDifference=function(a,b){return 100*(1-this.similarity(a,b))},a.removeNonWordCharacters=function(a){var b,c;return c=[],b=new String(a),XRegExp.forEach(a,XRegExp("[^0-9\\p{L}\\p{N}]"),function(a,d){var e;return e=a.index-d,b=b.substring(0,e)+b.substring(e+1),c.push({"char":a[0],index:a.index})}),{str:b,removed:c}},a}(),this.BlurrySearch.StringHelper=a}.call(this);